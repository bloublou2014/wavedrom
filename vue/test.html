<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Page</title>
    <link href="../css/codemirror.css" rel="stylesheet" type="text/css">
    <link href="../css/dialog.css" rel="stylesheet" type="text/css">
    <link href="../css/main.css" rel="stylesheet" type="text/css">
    <!--<script type="application/javascript" src="wavedrom.js"></script>-->
    <script type="application/javascript" src="../dist/wavedrom.js"></script>
    <script type="application/javascript" src="../extra_lib/json5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<body>
<div id="app">
    <div>
        <textarea style="width: 100%;height: 300px" v-model="text" placeholder="JSON (WaveDrom)"></textarea>
        <br>
        <div :id="id"></div>
    </div>
</div>
<script>
    // window.WaveSkin = require('wavedrom/skins/default.js');
    // var WaveDrom = require('wavedrom');

    var app = new Vue({
        el: '#app',
        name: 'WaveDrom',
        /*props: {
            id: Number,
        },*/
        data: {
            id: 0,
            text: '{signal: [\n' +
                '  {name: \'i_Clk\',      wave: \'P...|..|......\',  \n' +
                '      period:2,          node: \'............\'},  \n' +
                '  {name: \'i_Switch_1\', wave: \'0.1.|0.|.1.|0.\',  \n' +
                '     shift:0.5,          node: \'..a..de.....\'},\n' +
                '  {},\n' +
                '  {name: \'r_Switch_1\', wave: \'0..1|.0|..1|.0\',  \n' +
                '                       node: \'...c.hf.....\'},\n' +
                '  {name: \'r_LED_1\',    wave: \'0...|.1|...|.0\',  \n' +
                '                       node: \'......g.....\'},\n' +
                '  {},\n' +
                '  {name: \'o_LED_1\',    wave: \'0...|.1|...|.0\',  \n' +
                '                       node: \'............\'},\n' +
                '],\n' +
                ' edge: [\n' +
                '    \'a~>c flip\',\n' +
                '    \'d~>f flop\', \n' +
                '    \'h~>g\', \'e~>g\', \n' +
                ' ],\n' +
                ' head:{   \n' +
                '   tick:0,\n' +
                ' },\n' +
                '  config: { hscale: 1 }}\n'
        },

        watch: {
            text: function () {
                const j = JSON5.parse(this.text);
                WaveDrom.renderWaveForm(j, this.id);
            }
        }
    });
</script>

<!--
'{signal: [\n' +
              '  {name: \'i_Clk\',      wave: \'P...|..|......\'},  \n'  +
              ']}\n'


<div>
    <textarea id="text" placeholder="JSON (WaveDrom)"></textarea>
    <br>
    <div id="display"></div>
</div>
<script>
    // window.WaveSkin = require('skins/default.js');
    // const  = require('wavedrom');
    const area = window.document.querySelector('textarea');
    if (area.addEventListener) {
        area.addEventListener('input', function () {
            // event handling code for sane browsers
            const value = JSON5.parse(document.getElementById('text').value);
            WaveDrom.RenderWaveForm(document.getElementById('display'), value, document.getElementById('display'));
        }, false);
    }
</script>-->
</body>
</html>